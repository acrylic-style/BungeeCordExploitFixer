package xyz.acrylicstyle.bcExploitFixer.util;

import util.ResourceLocator;
import xyz.acrylicstyle.bcExploitFixer.BungeeCordExploitFixer;

import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

public class Versioning {
    private static String VERSION = null;

    public static String getVersion() {
        if (VERSION != null) return VERSION;
        InputStream stream = ResourceLocator.getInstance(Versioning.class).getResourceAsStream("/META-INF/maven/xyz.acrylicstyle/BungeeCordExploitFixer/pom.properties");
        Properties properties = new Properties();
        String version = "unknown";
        if (stream != null) {
            try {
                properties.load(stream);
                version = properties.getProperty("version", version);
            } catch (IOException ex) {
                BungeeCordExploitFixer.error("Version information is corrupt");
                ex.printStackTrace();
            }
        }
        VERSION = version;
        return VERSION;
    }
}
